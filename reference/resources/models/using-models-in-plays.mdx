---
title: "Using models in plays"
description: "Learn how to work with data models and records from your plays"
---

Plays can interact with your data models in powerful ways—searching records, creating new entries, extending schemas with custom columns, and storing temporary values. This guide covers the data-related nodes available in the play editor.

---

## Model search node

![Use a model search node](/images/enrol-data-in-plays-1.png)

Search and retrieve records from any model or dataset in your workspace. This node queries your data and returns matching records that you can use in subsequent steps of your play.

**Common use cases:**

| Use case | Example |
| -------- | ------- |
| **Find related records** | Look up all contacts at a company when a deal is created |
| **Check for duplicates** | Search for existing leads before creating new ones |
| **Aggregate data** | Retrieve all recent activities for a given account |
| **Cross-reference** | Match records between different data sources |

### Configuring search criteria

Define your search by specifying:

- **Model** — The data model to search (e.g., Contacts, Companies, Deals)
- **Filters** — Conditions that records must match
- **Limit** — Maximum number of records to return
- **Sort** — Order results by a specific field

<Tip>
  Use expressions in your filter values to create dynamic searches. For example, filter by `{{nodes.start.company_domain}}` to find records related to the triggering record.
</Tip>

---

## Model record node

![Use a model record node](/images/enrol-data-in-plays-2.png)

Create new records in compatible data models directly from your plays. This node allows you to write structured data back to models that support record creation.

### Supported data models

| Model type | Support |
| ---------- | ------- |
| **HTTP models** | ✅ Full support for creating records |
| **Custom models** | ✅ Full support for creating records |
| **CRM models** (HubSpot, Salesforce, etc.) | ❌ Use dedicated write nodes instead |
| **Warehouse models** (Snowflake, BigQuery) | ❌ Read-only |

<Warning>
  Data models synchronized from external services like CRMs don't support creating records with this node. Use the dedicated write nodes for each service (e.g., HubSpot Create Contact, Salesforce Create Lead) to ensure proper data sync.
</Warning>

### Data type behavior

When you create a new record, the first value written to each field determines its data type. This type cannot be changed afterward, so plan your schema carefully before writing production data.

---

## Model custom column node

![Use a custom column node](/images/enrol-data-in-plays-3.png)

Extend synchronized data models with additional columns without modifying the source system. Custom columns let you store Cargo-specific metadata, flags, or computed values alongside your CRM or warehouse data.

**Examples of custom columns:**

- Lead scoring values calculated by your plays
- Enrichment timestamps for tracking data freshness
- Processing flags like `needs_review` or `outreach_sent`
- Aggregated metrics from other data sources

### Configuration

| Property | Description |
| -------- | ----------- |
| **Model** | The data model to extend with a custom column |
| **Record ID** | The primary identifier of the record to update |
| **Column name** | Name for the custom column (creates it if it doesn't exist) |
| **Value** | The data to write to this column |

### Finding the correct record ID

The Record ID field requires the primary identifier from the target data model:

| Scenario | How to get the ID |
| -------- | ----------------- |
| Same model as play trigger | Use `{{nodes.start._id}}` |
| Different model | Use a Model Search node to find the record, then reference its ID |
| Known external ID | Use the external system's ID (e.g., HubSpot contact ID) |

<Note>
  If you're updating records in the same model that triggered your play, `{{nodes.start._id}}` is the simplest approach. For cross-model updates, always use a Model Search node first to locate the target record.
</Note>

---

## Memory node

![Use a memory node](/images/enrol-data-in-plays-4.png)

Store and access structured data using a key/value store. Memory nodes are useful for persisting values across play runs, counting occurrences, or sharing state between different parts of your workflow.

### Scope options

| Scope | Behavior |
| ----- | -------- |
| **Workspace** | Data is shared across all plays in your workspace |
| **Play** | Data is isolated to the current play |

### Available actions

| Action | Description |
| ------ | ----------- |
| **Get** | Retrieve a value by its key |
| **Set** | Store a value at a key (overwrites existing) |
| **Get or Set** | Return existing value, or set a default if none exists |
| **Increment** | Add to a numeric value (useful for counters) |
| **Decrement** | Subtract from a numeric value |
| **Remove** | Delete a key and its value |

<Tip>
  Use the **Increment** action to build simple counters—track how many times a play has run, count leads processed today, or implement rate limiting logic.
</Tip>

---

## Best practices

<AccordionGroup>
  <Accordion title="Use Model Search to validate before writing">
    Before creating or updating records, search for existing entries to prevent duplicates. This is especially important when processing data from multiple sources.
  </Accordion>
  <Accordion title="Store enrichment metadata in custom columns">
    Track when records were last enriched, which providers were used, and whether the enrichment succeeded. This helps you avoid re-processing records unnecessarily.
  </Accordion>
  <Accordion title="Scope memory appropriately">
    Use play-scoped memory for play-specific state (like deduplication within a run) and workspace-scoped memory for cross-play coordination (like global rate limiting).
  </Accordion>
  <Accordion title="Handle empty search results">
    Model Search nodes can return zero results. Add a Branch node to check for empty results and handle them gracefully—either skip processing or create a new record.
  </Accordion>
</AccordionGroup>

---

## Next steps

<CardGroup cols={2}>
  <Card
    title="Build a play"
    icon="play"
    href="/reference/plays/overview"
  >
    Learn the fundamentals of the play editor.
  </Card>
  <Card
    title="Configure triggers"
    icon="bolt"
    href="/reference/plays/triggering-a-play"
  >
    Control when and how your plays execute.
  </Card>
  <Card
    title="SQL models"
    icon="database"
    href="/reference/resources/models/sql-models"
  >
    Create custom data models using SQL queries.
  </Card>
  <Card
    title="Warehouse setup"
    icon="layer-group"
    href="/reference/resources/warehouse/overview"
  >
    Understand how Cargo manages your data.
  </Card>
</CardGroup>

