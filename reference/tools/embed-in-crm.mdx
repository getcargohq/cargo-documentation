---
title: "Triggering from Salesforce"
description: "Create a custom button inside the native Salesforce app in order to trigger the tool directly from within the CRM."
---

This integration enables your sales reps to autonomously launch Cargo actions directly associated to a contact or account without leaving the CRM. Perfect for on-demand company research, contact enrichment, and lead scoring.

## Prerequisites

What you'll need to make this possible:
- **Salesforce admin access** - Required to create flows, named credentials, and custom buttons and to create the SFDC connector in Cargo (if not already the case)
- **Cargo workspace** - With write access and an active HTTP model set up
- **API access** - Your Cargo API token and model endpoint URL

Follow this 6-step tutorial to implement this integration in your CRM.

## Step 1- Create an HTTP data model in Cargo

Create a new **HTTP connector** and **Model** in Cargo

![Step 0 - Connect a New HTTP Data Source and Set Up a Model.gif](/images/Step0-ConnectaNewHTTPDataSourceandSetUpaModel.gif)

The copied URL will resemble the following items

Base URL:

```
https://api.getcargo.io
```

Model Id:

```
/v1/models/<your_model_id>/records/ingest
```

Access token:

```
?token=<your_token>
```

## Step 2 - Create a named credential

![Step 1 - Create a Named Credential in Salesforce.gif](/images/Step1-CreateaNamedCredentialinSalesforce.gif)

- Go to **Setup → Named Credentials**.
- Click **New** and select **Legacy Named Credential**.
- Enter the label and URL for your Cargo endpoint.
- Save the credential.

## Step 3 - Register an external service

In **Setup → External Services**, register a new one

![Step 2 - Register an External Service in Salesforce.gif](/images/Step2-RegisteranExternalServiceinSalesforce.gif)

Select the named credential you just created and register the service with the provided schema:

```
{"openapi":"3.0.1","info":{"title":"Cargo","description":""},"paths":{"CARGOPATH":{"post":{"description":"","operationId":"Query Cargo","parameters":[{"name":"token","in":"query","description":"","required":false,"allowEmptyValue":false,"schema":{"type":"string"}}],"requestBody":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"accountId":{"type":"string"},"linkedinUrl":{"type":"string"},"domain":{"type":"string"},"name":{"type":"string"},"linkedinId":{"type":"string"},"ownerId":{"type":"string"}}}}},"required":true},"responses":{"2XX":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}}}}}}}
```

> ### Important to note
>
> Replace `CargoPath` by your Webhook URL from Cargo, make sure to take the part starting `v1` and ending `ingest`
>
> ```
> /v1/models/<your_model_id>/records/ingest
> ```
>
> Make sure the `schema` section of this reflects the fields that you'll be specifying in \*\*Step 4.2 \*\*below. As an example, we'll be using the following.
>
> ```
> {
>   "ownerId": { "type": "string" },
>   "accountId": { "type": "string" },
>   "domain": { "type": "string" }
> }
> ```

## Step 4 - **Create a flow**

### 4.1 - Retrieve account records

Create a **flow** that pulls account records from Salesforce.

![Step 3 - Create a Flow to Retrieve Account Records in Salesforce.gif](/images/Step3-CreateaFlowtoRetrieveAccountRecordsinSalesforce.gif)

### 4.2 - Map fields in an assignment step

Map the Salesforce fields to the inputs required by your Cargo **HTTP call**.

![Step 4 - Map Fields in a Salesforce Flow Assignment Step (8).gif](/images/Step4-MapFieldsinaSalesforceFlowAssignmentStep\(8\).gif)

At this point we need to specify the JSON schema for the HTTP callout that aligns with the one we specified before during **Step 3**. For the example that we shared above, the schema below will be valid. Note, that we're providing random example of values for each field to configure this action.

```
{
"accountId": "0018b00002ABCDeAA1",
"domain": "example.com",
"ownerId": "0058b00001XYZAbAA1"
}
```

### 4.3 - Add a screen step at the end of the flow

Add a **screen element** to show results or request user input before finishing the flow.

![Step 5 - Add a Screen Step to Your Salesforce Flow (1).gif](/images/Step5-AddaScreenSteptoYourSalesforceFlow\(1\).gif)

### 4.4 - Map the variable(s) created during the HTTP callout action's creation into the assignment action

![Configure Variable Assignments for HTTP Callouts in Salesforce Flow (1).gif](/images/ConfigureVariableAssignmentsforHTTPCalloutsinSalesforceFlow\(1\).gif)

## Step 5 - Add a custom button to your Accounts interface

Go to Setup → Object Manager → Account → Buttons, Links, and Actions.

![Step 6 - Add a Custom Flow Button to an Account in Salesforce (6).gif](/images/Step6-AddaCustomFlowButtontoanAccountinSalesforce\(6\).gif)

- Create a new Flow Button.
- Link it to the flow you just built.
- Add the button to the Account page layout.

## Step 6 - Setup a Cargo Play to update the Account in Salesforce with automated account research

Create a `Play` that is fed by the HTTP model you created above

![Step 6 - Build a Workflow to Automate Salesforce Integrations.gif](/images/Step6-BuildaWorkflowtoAutomateSalesforceIntegrations.gif)

- Within the Play, add an AI node with the right prompt to perform the account research
- Add a Salesforce `Update` action, using the account ID being passed from the HTTP model as the `Matching Salesforce Property`
- Configure the Play to automatically update the Salesforce record with the research results

## Testing your integration

### Verify the setup
1. **Test the button** - Click your custom button on an Account record
2. **Check the flow** - Ensure the flow runs without errors
3. **Monitor the Play** - Verify the Cargo Play executes and updates the Salesforce record
4. **Review results** - Confirm the Account record is updated with the research data

### Common issues and solutions

**"Flow failed to start"**
- Check that the custom button is properly linked to the flow
- Verify the flow is active and has the correct permissions

**"HTTP callout failed"**
- Verify the named credential is correctly configured
- Check that the API token is valid and has proper permissions
- Ensure the model ID in the URL matches your Cargo model

**"Play not executing"**
- Confirm the HTTP model is receiving data from Salesforce
- Check that the Play is active and properly configured
- Verify the Salesforce update action has the correct field mappings

## Next steps

Once your integration is working:
- **Train your team** - Show reps how to use the new button
- **Monitor usage** - Track which accounts are being researched
- **Optimize prompts** - Refine your AI prompts based on results
- **Scale up** - Consider adding similar buttons for Contacts or Leads